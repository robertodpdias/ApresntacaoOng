{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport PermissionsAndroid from \"react-native-web/dist/exports/PermissionsAndroid\";\nimport * as FileSystem from 'expo-file-system';\nvar StorageAccessFramework = FileSystem.StorageAccessFramework;\nimport global from \"../../Global/Style\";\nimport { Camera } from 'expo-camera';\nimport { Ionicons, MaterialCommunityIcons, MaterialIcons } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function TelaCamera(_ref) {\n  var navigation = _ref.navigation;\n  var camRef = useRef(null);\n\n  var _useState = useState(Camera.Constants.Type.back),\n      _useState2 = _slicedToArray(_useState, 2),\n      type = _useState2[0],\n      setType = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      permission = _useState4[0],\n      setPermission = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      foto = _useState6[0],\n      setFoto = _useState6[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var permissions, _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(StorageAccessFramework.requestDirectoryPermissionsAsync());\n\n            case 2:\n              permissions = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync());\n\n            case 5:\n              _await$Camera$request = _context.sent;\n              status = _await$Camera$request.status;\n              setPermission(status === 'granted');\n              console.log(status);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  if (permission === null) {\n    return _jsx(View, {});\n  }\n\n  if (permission === false) {\n    return _jsx(Text, {\n      children: \" Acesso negado!\"\n    });\n  }\n\n  function takePicture() {\n    var data, base;\n    return _regeneratorRuntime.async(function takePicture$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!camRef) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(camRef.current.takePictureAsync());\n\n          case 3:\n            data = _context2.sent;\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(FileSystem.readAsStringAsync(data.uri, {\n              encoding: FileSystem.EncodingType.Base64\n            }));\n\n          case 6:\n            base = _context2.sent;\n            setFoto({\n              uri: \"data:image/\" + data.uri[data.uri.length - 1] + \";base64,\" + base\n            });\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var submitPicture = function submitPicture() {\n    return _regeneratorRuntime.async(function submitPicture$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            navigation.navigate(\"CadastrarAssistido\", foto);\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(Camera, {\n      style: {\n        flex: 1\n      },\n      type: type,\n      zoom: 0.1,\n      ref: camRef,\n      children: [_jsx(Ionicons, {\n        name: \"arrow-back-circle-outline\",\n        style: {\n          marginLeft: 5,\n          marginTop: 20\n        },\n        size: 35,\n        color: \"#166B8A\",\n        onPress: function onPress() {\n          navigation.navigate('CadastrarAssistido');\n        }\n      }), _jsx(View, {\n        style: {\n          flex: 1,\n          backgroundColor: 'transparent',\n          flexDirection: \"row\"\n        },\n        children: _jsxs(View, {\n          style: {\n            width: '100%',\n            height: '10%',\n            position: 'absolute',\n            bottom: 0,\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-evenly',\n            alignItems: 'center',\n            marginBottom: \"2%\"\n          },\n          children: [_jsx(TouchableOpacity, {\n            style: styles.buttons,\n            onPress: function onPress() {\n              setType(type === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back);\n            },\n            children: _jsx(Ionicons, {\n              name: \"md-camera-reverse-outline\",\n              size: 30,\n              color: \"white\"\n            })\n          }), _jsx(TouchableOpacity, {\n            onPress: takePicture,\n            style: styles.buttons,\n            children: _jsx(MaterialCommunityIcons, {\n              name: \"camera-iris\",\n              size: 50,\n              color: \"white\"\n            })\n          })]\n        })\n      })]\n    }), foto && _jsxs(View, {\n      style: {\n        width: \"100%\",\n        height: '100%',\n        alignItems: 'center',\n        marginTop: \"10%\",\n        justifyContent: \"space-evenly\"\n      },\n      children: [_jsx(Text, {\n        style: {\n          fontSize: 25,\n          left: \"40%\"\n        },\n        onPress: function onPress() {\n          return setFoto(false);\n        },\n        children: \"X\"\n      }), _jsx(Image, {\n        source: foto,\n        style: {\n          width: \"70%\",\n          height: \"70%\",\n          borderRadius: 10\n        }\n      }), _jsx(TouchableOpacity, {\n        style: global.cardButton1,\n        onPress: function onPress() {\n          return submitPicture();\n        },\n        children: _jsx(Text, {\n          style: global.buttonText1,\n          children: \"SALVAR\"\n        })\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center'\n  },\n  buttons: {\n    width: \"17%\",\n    height: \"100%\",\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: \"rgba(100, 100, 100, 0.31)\",\n    borderRadius: 50\n  }\n});","map":{"version":3,"sources":["C:/Users/jaque/Desktop/SENAI/ONG/Mobile/pages/Assistidos/Camera/Index.js"],"names":["React","useState","useEffect","useRef","FileSystem","StorageAccessFramework","global","Camera","Ionicons","MaterialCommunityIcons","MaterialIcons","TelaCamera","navigation","camRef","Constants","Type","back","type","setType","permission","setPermission","foto","setFoto","requestDirectoryPermissionsAsync","permissions","requestCameraPermissionsAsync","status","console","log","takePicture","current","takePictureAsync","data","readAsStringAsync","uri","encoding","EncodingType","Base64","base","length","submitPicture","navigate","styles","container","flex","marginLeft","marginTop","backgroundColor","flexDirection","width","height","position","bottom","display","justifyContent","alignItems","marginBottom","buttons","front","fontSize","left","borderRadius","cardButton1","buttonText1","StyleSheet","create"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { StyleSheet, Text, TouchableOpacity, View, Image, PermissionsAndroid} from 'react-native';\r\n\r\nimport * as FileSystem from 'expo-file-system';\r\nconst { StorageAccessFramework } = FileSystem;\r\n\r\nimport global from \"../../Global/Style\"\r\n\r\nimport { Camera } from 'expo-camera';\r\n// import * as Permissions from 'expo-permissions';\r\n// import * as MediaLibrary from 'expo-media-library';\r\n\r\nimport { Ionicons, MaterialCommunityIcons, MaterialIcons } from '@expo/vector-icons';\r\n\r\nexport default function TelaCamera({navigation}) {\r\n  const camRef = useRef(null);\r\n  const [type, setType] = useState(Camera.Constants.Type.back)\r\n  const [permission, setPermission] = useState(null);\r\n  const [foto, setFoto] = useState(null)\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const permissions = await StorageAccessFramework.requestDirectoryPermissionsAsync();\r\n      const {status} = await Camera.requestCameraPermissionsAsync();\r\n      setPermission(status === 'granted');\r\n      console.log(status);\r\n    })();\r\n  }, []);\r\n\r\n  if(permission === null){\r\n    return <View/>;\r\n  }\r\n\r\n  if(permission === false){\r\n    return <Text> Acesso negado!</Text>;\r\n  }\r\n\r\n  async function takePicture(){\r\n    if(camRef){\r\n      const data = await camRef.current.takePictureAsync();\r\n      \r\n      let base = await FileSystem.readAsStringAsync(data.uri, {\r\n        encoding: FileSystem.EncodingType.Base64,\r\n      });\r\n      \r\n      setFoto({\r\n        uri: `data:image/${data.uri[data.uri.length-1]};base64,`+base\r\n      })\r\n    }\r\n  }\r\n\r\n  const submitPicture = async () => {\r\n    navigation.navigate(\"CadastrarAssistido\", foto);\r\n    /*try {\r\n      const granted = await PermissionsAndroid.request(\r\n        PermissionsAndroid.PERMISSIONS.READ_EXTERNAL_STORAGE,\r\n        {\r\n          \"title\": \"Access Storage\",\r\n          \"message\": \"Access Storage for the pictures\"\r\n        }\r\n      )\r\n      if (granted === PermissionsAndroid.RESULTS.GRANTED) {\r\n        await CameraRoll.saveToCameraRoll(foto);\r\n      } else {\r\n        console.log(\"Permissao de camera negada.\");\r\n      }\r\n    } catch (err) {\r\n      console.warn(err);\r\n    }\r\n\r\n    setFoto(null);*/\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Camera style={{flex: 1}} type={type} zoom={0.1} ref={camRef}>\r\n      <Ionicons name=\"arrow-back-circle-outline\" style={{marginLeft: 5, marginTop: 20}} size={35} color=\"#166B8A\" onPress={() => {navigation.navigate('CadastrarAssistido')}} />\r\n        <View style={{flex: 1, backgroundColor: 'transparent', flexDirection: \"row\"}}>\r\n          <View style={{width: '100%', height: '10%', position: 'absolute', bottom: 0, display: 'flex', flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center',marginBottom: \"2%\"}}>\r\n            <TouchableOpacity style={styles.buttons} onPress={() => {\r\n              setType(\r\n                  type === Camera.Constants.Type.back\r\n                  ? Camera.Constants.Type.front\r\n                  : Camera.Constants.Type.back\r\n                  )\r\n                }}\r\n              >\r\n                <Ionicons name=\"md-camera-reverse-outline\" size={30} color=\"white\" />\r\n            </TouchableOpacity>\r\n            <TouchableOpacity onPress={takePicture} style={styles.buttons}>\r\n              <MaterialCommunityIcons name=\"camera-iris\" size={50} color=\"white\" />\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </Camera>\r\n      {foto &&\r\n        <View style={{width: \"100%\", height: '100%', alignItems: 'center', marginTop: \"10%\", justifyContent: \"space-evenly\"}}>\r\n            <Text style={{fontSize: 25, left: \"40%\"}} onPress={() => setFoto(false)}>X</Text>\r\n            <Image source={foto} style={{width: \"70%\", height: \"70%\", borderRadius: 10}}/>\r\n            <TouchableOpacity style={global.cardButton1} onPress={() => submitPicture()}>\r\n              <Text style={global.buttonText1}>SALVAR</Text>\r\n            </TouchableOpacity>\r\n        </View>     \r\n      }\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n  },\r\n  buttons:{\r\n    width: \"17%\",\r\n    height: \"100%\",\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: \"rgba(100, 100, 100, 0.31)\",\r\n    borderRadius: 50\r\n  }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}